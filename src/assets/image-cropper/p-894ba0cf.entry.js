import{r as t,c as e,h as i,F as s,H as n}from"./p-60b24ee9.js";const o=":host{--active-color:green;--inactive-color:gray;--active-stroke:2;--inactive-stroke:4;display:block;position:relative;top:0;left:0;width:100%;height:100%}*{user-select:none;-webkit-user-select:none;-moz-user-select:none}.container{display:flex;justify-content:center;background:black;overflow:hidden}.absolute{position:absolute;top:0;left:0;width:100%;height:100%}.cropper-controls{stroke:var(--active-color)}.footer{position:absolute;left:0;bottom:0;height:100px;width:100%;pointer-events:none}.items{box-sizing:border-box;display:flex;width:100%;height:100%;align-items:center;justify-content:center;padding:2.0em}.items .item{flex:1;text-align:center}.items .item:first-child{text-align:left}.items .item:last-child{text-align:right}.accept-use img{width:2.5em;height:2.5em;pointer-events:all;cursor:pointer}.accept-cancel img{width:2.5em;height:2.5em;pointer-events:all;cursor:pointer}.cropper-svg{align-self:center;touch-action:none;cursor:grab}.cropper-svg polygon{cursor:move}.cropper-svg rect{cursor:grab}.hidden-canvas{display:none}.cropper-svg .inactive-selection{stroke:var(--inactive-color);cursor:pointer}.dashed{stroke-dasharray:10,10}";const a=o;const r=class{constructor(i){t(this,i);this.confirmed=e(this,"confirmed",7);this.canceled=e(this,"canceled",7);this.selectionClicked=e(this,"selectionClicked",7);this.imageCropped=e(this,"imageCropped",7);this.handlers=[0,1,2,3,4,5,6,7];this.polygonMouseDown=false;this.polygonMouseDownPoint={x:0,y:0};this.previousDistance=undefined;this.svgMouseDownPoint=undefined;this.handlerMouseDownPoint={x:0,y:0};this.originalPoints=undefined;this.usingTouchEvent=false;this.usingQuad=false;this.img=undefined;this.rect=undefined;this.quad=undefined;this.license=undefined;this.hidefooter=undefined;this.handlersize=undefined;this.inactiveSelections=undefined;this.viewBox="0 0 1280 720";this.activeStroke=2;this.inActiveStroke=4;this.selectedHandlerIndex=-1;this.points=undefined;this.offsetX=0;this.offsetY=0;this.scale=1}componentDidLoad(){this.containerElement.addEventListener("touchmove",(t=>{this.onContainerTouchMove(t)}));this.containerElement.addEventListener("touchend",(()=>{this.previousDistance=undefined}))}watchImgPropHandler(t){if(t){this.resetStates();this.viewBox="0 0 "+t.naturalWidth+" "+t.naturalHeight;if(this.root){const t=parseInt(this.root.style.getPropertyValue("--inactive-stroke"));const e=parseInt(this.root.style.getPropertyValue("--active-stroke"));if(t){this.inActiveStroke=t}if(e){this.activeStroke=e}}}}watchRectPropHandler(t){if(t){this.usingQuad=false;let e=this.getPointsFromRect(t);if(this.img){this.restrainPointsInBounds(e,this.img.naturalWidth,this.img.naturalHeight)}this.points=e}}getPointsFromRect(t){const e={x:t.x,y:t.y};const i={x:t.x+t.width,y:t.y};const s={x:t.x+t.width,y:t.y+t.height};const n={x:t.x,y:t.y+t.height};return[e,i,s,n]}watchQuadPropHandler(t){if(t){this.usingQuad=true;let e=t.points;if(this.img){this.restrainPointsInBounds(e,this.img.naturalWidth,this.img.naturalHeight)}this.points=t.points}}onCanceled(){if(this.canceled){this.canceled.emit()}}async cropAndEmitImage(){const t=await this.getCroppedImage({perspectiveTransform:true,colorMode:"color"});this.imageCropped.emit(t)}onConfirmed(){if(this.confirmed){this.confirmed.emit()}}getPointsData(){if(this.points){let t=this.points[0].x+","+this.points[0].y+" ";t=t+this.points[1].x+","+this.points[1].y+" ";t=t+this.points[2].x+","+this.points[2].y+" ";t=t+this.points[3].x+","+this.points[3].y;return t}return""}renderFooter(){if(this.hidefooter===""){return""}return i("div",{class:"footer"},i("section",{class:"items"},i("div",{class:"item accept-cancel",onClick:()=>this.onCanceled()},i("img",{src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%23727A87' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_5_'%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M394.2,142L370,117.8c-1.6-1.6-4.1-1.6-5.7,0L258.8,223.4c-1.6,1.6-4.1,1.6-5.7,0L147.6,117.8 c-1.6-1.6-4.1-1.6-5.7,0L117.8,142c-1.6,1.6-1.6,4.1,0,5.7l105.5,105.5c1.6,1.6,1.6,4.1,0,5.7L117.8,364.4c-1.6,1.6-1.6,4.1,0,5.7 l24.1,24.1c1.6,1.6,4.1,1.6,5.7,0l105.5-105.5c1.6-1.6,4.1-1.6,5.7,0l105.5,105.5c1.6,1.6,4.1,1.6,5.7,0l24.1-24.1 c1.6-1.6,1.6-4.1,0-5.7L288.6,258.8c-1.6-1.6-1.6-4.1,0-5.7l105.5-105.5C395.7,146.1,395.7,143.5,394.2,142z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"})),i("div",{class:"item accept-use",onClick:()=>this.onConfirmed()},i("img",{src:"data:image/svg+xml,%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 512 512' enable-background='new 0 0 512 512' xml:space='preserve'%3E%3Ccircle fill='%232CD865' cx='256' cy='256' r='256'/%3E%3Cg id='Icon_1_'%3E%3Cg%3E%3Cg%3E%3Cpath fill='%23FFFFFF' d='M208,301.4l-55.4-55.5c-1.5-1.5-4-1.6-5.6-0.1l-23.4,22.3c-1.6,1.6-1.7,4.1-0.1,5.7l81.6,81.4 c3.1,3.1,8.2,3.1,11.3,0l171.8-171.7c1.6-1.6,1.6-4.2-0.1-5.7l-23.4-22.3c-1.6-1.5-4.1-1.5-5.6,0.1L213.7,301.4 C212.1,303,209.6,303,208,301.4z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E"}))))}rendenInactiveSelections(){if(!this.inactiveSelections){return""}return i(s,null,this.inactiveSelections.map(((t,e)=>i("polygon",{points:this.getPointsDataFromSelection(t),class:"inactive-selection dashed","stroke-width":this.inActiveStroke*this.getRatio(),fill:"transparent",onMouseUp:()=>this.onSelectionClicked(e),onTouchStart:()=>this.onSelectionClicked(e)}))))}onSelectionClicked(t){if(this.selectionClicked){this.selectionClicked.emit(t)}}getPointsDataFromSelection(t){let e=[];if("width"in t){e=this.getPointsFromRect(t)}else{e=t.points}let i=e[0].x+","+e[0].y+" ";i=i+e[1].x+","+e[1].y+" ";i=i+e[2].x+","+e[2].y+" ";i=i+e[3].x+","+e[3].y;return i}renderHandlers(){if(!this.points){return i("div",null)}return i(s,null,this.handlers.map((t=>i("rect",{x:this.getHandlerPos(t,"x"),y:this.getHandlerPos(t,"y"),width:this.getHandlerSize(),height:this.getHandlerSize(),class:"cropper-controls","stroke-width":t===this.selectedHandlerIndex?this.activeStroke*2*this.getRatio():this.activeStroke*this.getRatio(),fill:"transparent",onMouseDown:e=>this.onHandlerMouseDown(e,t),onMouseUp:t=>this.onHandlerMouseUp(t),onTouchStart:e=>this.onHandlerTouchStart(e,t),onPointerDown:e=>this.onHandlerPointerDown(e,t)}))))}getHandlerPos(t,e){let i=0;let s=this.getHandlerSize();if(t===0){i=this.points[0][e]}else if(t===1){i=this.points[0][e]+(this.points[1][e]-this.points[0][e])/2}else if(t===2){i=this.points[1][e]}else if(t===3){i=this.points[1][e]+(this.points[2][e]-this.points[1][e])/2}else if(t===4){i=this.points[2][e]}else if(t===5){i=this.points[3][e]+(this.points[2][e]-this.points[3][e])/2}else if(t===6){i=this.points[3][e]}else if(t===7){i=this.points[0][e]+(this.points[3][e]-this.points[0][e])/2}i=i-s/2;return i}getHandlerSize(){let t=this.getRatio();let e=20;if(this.handlersize){try{e=parseInt(this.handlersize)}catch(t){console.log(t)}}return Math.ceil(e*t)}onSVGTouchStart(t){this.usingTouchEvent=true;this.svgMouseDownPoint=undefined;this.previousDistance=undefined;let e=this.getMousePosition(t,this.svgElement);if(t.touches.length>1){this.selectedHandlerIndex=-1}else{if(this.selectedHandlerIndex!=-1){this.originalPoints=JSON.parse(JSON.stringify(this.points));this.handlerMouseDownPoint.x=e.x;this.handlerMouseDownPoint.y=e.y}else{this.svgMouseDownPoint={x:e.x,y:e.y}}}}onSVGTouchEnd(){this.svgMouseDownPoint=undefined}onSVGTouchMove(t){t.stopPropagation();t.preventDefault();if(t.touches.length===2){this.pinchAndZoom(t)}else{if(this.svgMouseDownPoint){this.panSVG(t)}else{this.handleMoveEvent(t)}}}pinchAndZoom(t){const e=this.getDistanceBetweenTwoTouches(t.touches[0],t.touches[1]);if(this.previousDistance){if(e-this.previousDistance>0){this.scale=Math.min(10,this.scale+.02)}else{this.scale=Math.max(.1,this.scale-.02)}this.previousDistance=e}else{this.previousDistance=e}}getDistanceBetweenTwoTouches(t,e){const i=t.clientX-e.clientX;const s=t.clientY-e.clientY;const n=i*i+s+s;return n}onContainerMouseUp(){this.svgMouseDownPoint=undefined;if(!this.usingTouchEvent){this.selectedHandlerIndex=-1;this.polygonMouseDown=false}}onSVGMouseDown(t){if(!this.usingTouchEvent){let e=this.getMousePosition(t,this.svgElement);this.svgMouseDownPoint={x:e.x,y:e.y}}}onContainerWheel(t){if(t.deltaY<0){this.scale=this.scale+.1}else{this.scale=Math.max(.1,this.scale-.1)}t.preventDefault()}onContainerTouchMove(t){t.preventDefault();if(t.touches.length===2){this.pinchAndZoom(t)}}getPanAndZoomStyle(){if(this.img){return"scale(1.0)"}else{return"scale(1.0)"}}onSVGMouseMove(t){if(this.svgMouseDownPoint){this.panSVG(t)}else{this.handleMoveEvent(t)}}panSVG(t){let e=this.getMousePosition(t,this.svgElement);let i=e.x-this.svgMouseDownPoint.x;let s=e.y-this.svgMouseDownPoint.y;this.offsetX=this.offsetX+i;this.offsetY=this.offsetY+s}handleMoveEvent(t){if(this.polygonMouseDown){let e=this.getMousePosition(t,this.svgElement);let i=e.x-this.polygonMouseDownPoint.x;let s=e.y-this.polygonMouseDownPoint.y;let n=JSON.parse(JSON.stringify(this.originalPoints));for(const t of n){t.x=t.x+i;t.y=t.y+s;if(t.x<0||t.y<0||t.x>this.img.naturalWidth||t.y>this.img.naturalHeight){console.log("reach bounds");return}}this.points=n}if(this.selectedHandlerIndex>=0){let e=this.getPointIndexFromHandlerIndex(this.selectedHandlerIndex);let i=this.getMousePosition(t,this.svgElement);let s=i.x-this.handlerMouseDownPoint.x;let n=i.y-this.handlerMouseDownPoint.y;let o=JSON.parse(JSON.stringify(this.originalPoints));if(e!=-1){let t=o[e];t.x=this.originalPoints[e].x+s;t.y=this.originalPoints[e].y+n;if(this.usingQuad===false){if(e===0){o[1].y=t.y;o[3].x=t.x}else if(e===1){o[0].y=t.y;o[2].x=t.x}else if(e===2){o[1].x=t.x;o[3].y=t.y}else if(e===3){o[0].x=t.x;o[2].y=t.y}}}else{if(this.selectedHandlerIndex===1){o[0].y=this.originalPoints[0].y+n;o[1].y=this.originalPoints[1].y+n}else if(this.selectedHandlerIndex===3){o[1].x=this.originalPoints[1].x+s;o[2].x=this.originalPoints[2].x+s}else if(this.selectedHandlerIndex===5){o[2].y=this.originalPoints[2].y+n;o[3].y=this.originalPoints[3].y+n}else if(this.selectedHandlerIndex===7){o[0].x=this.originalPoints[0].x+s;o[3].x=this.originalPoints[3].x+s}}if(this.img){this.restrainPointsInBounds(o,this.img.naturalWidth,this.img.naturalHeight)}this.points=o}}restrainPointsInBounds(t,e,i){for(let s=0;s<t.length;s++){const n=t[s];n.x=Math.max(0,n.x);n.x=Math.min(n.x,e);n.y=Math.max(0,n.y);n.y=Math.min(n.y,i)}}onPolygonMouseDown(t){t.stopPropagation();this.originalPoints=JSON.parse(JSON.stringify(this.points));this.polygonMouseDown=true;let e=this.getMousePosition(t,this.svgElement);this.polygonMouseDownPoint.x=e.x;this.polygonMouseDownPoint.y=e.y}onPolygonMouseUp(t){t.stopPropagation();if(!this.usingTouchEvent){this.selectedHandlerIndex=-1;this.polygonMouseDown=false}}onPolygonTouchStart(t){this.usingTouchEvent=true;t.stopPropagation();this.selectedHandlerIndex=-1;this.polygonMouseDown=false;this.originalPoints=JSON.parse(JSON.stringify(this.points));this.polygonMouseDown=true;let e=this.getMousePosition(t,this.svgElement);this.polygonMouseDownPoint.x=e.x;this.polygonMouseDownPoint.y=e.y}onPolygonTouchEnd(t){t.stopPropagation();this.selectedHandlerIndex=-1;this.polygonMouseDown=false}onHandlerMouseDown(t,e){t.stopPropagation();let i=this.getMousePosition(t,this.svgElement);this.originalPoints=JSON.parse(JSON.stringify(this.points));this.handlerMouseDownPoint.x=i.x;this.handlerMouseDownPoint.y=i.y;this.selectedHandlerIndex=e}onHandlerMouseUp(t){t.stopPropagation();if(!this.usingTouchEvent){this.selectedHandlerIndex=-1}}onHandlerTouchStart(t,e){this.usingTouchEvent=true;t.stopPropagation();this.polygonMouseDown=false;let i=this.getMousePosition(t,this.svgElement);this.originalPoints=JSON.parse(JSON.stringify(this.points));this.handlerMouseDownPoint.x=i.x;this.handlerMouseDownPoint.y=i.y;this.selectedHandlerIndex=e}onHandlerPointerDown(t,e){if(t.pointerType!="mouse"&&!this.usingTouchEvent){this.onHandlerMouseDown(t,e);t.preventDefault()}}getPointIndexFromHandlerIndex(t){if(t===0){return 0}else if(t===2){return 1}else if(t===4){return 2}else if(t===6){return 3}return-1}getMousePosition(t,e){let i=e.getScreenCTM();if(t.targetTouches){let e=t.targetTouches[0].clientX;let s=t.targetTouches[0].clientY;return{x:(e-i.e)/i.a,y:(s-i.f)/i.d}}else{return{x:(t.clientX-i.e)/i.a,y:(t.clientY-i.f)/i.d}}}getRatio(){if(this.img){return this.img.naturalWidth/750}else{return 1}}async resetStates(){this.scale=1;this.offsetX=0;this.offsetY=0}async getAllSelections(t){let e=[];for(let i=0;i<this.inactiveSelections.length;i++){let s=this.inactiveSelections[i];if(t){if("width"in s&&t==="quad"){s={points:this.getPointsFromRect(s)}}else if(!("width"in s)&&t==="rect"){s=this.getRectFromPoints(s.points)}}e.push(s)}let i=true;if(t){if(t==="rect"){i=false}}else{if(!this.usingQuad){i=false}}if(i){const t=await this.getQuad();e.push(t)}else{const t=await this.getRect();e.push(t)}return e}async getPoints(){return this.points}async getQuad(){return{points:this.points}}async getRect(){return this.getRectFromPoints(this.points)}getRectFromPoints(t){let e;let i;let s;let n;for(const o of t){if(!e){e=o.x;s=o.x;i=o.y;n=o.y}else{e=Math.min(o.x,e);i=Math.min(o.y,i);s=Math.max(o.x,s);n=Math.max(o.y,n)}}e=Math.floor(e);s=Math.floor(s);i=Math.floor(i);n=Math.floor(n);return{x:e,y:i,width:s-e,height:n-i}}async getCroppedImage(t){let e=this.img;if(t.source){e=t.source}let i=false;if(t.selection){if(!("width"in t.selection)){i=true}}else{if(this.usingQuad){i=true}}if(t.perspectiveTransform&&window["Dynamsoft"]&&i){if(!this.cvr){await this.initCVR()}let i="NormalizeDocument_Color";if(t.colorMode){if(t.colorMode==="binary"){i="NormalizeDocument_Binary"}else if(t.colorMode==="gray"){i="NormalizeDocument_Gray"}else{i="NormalizeDocument_Color"}}let s;if(t.selection){if("width"in t.selection){s={points:this.getPointsFromRect(t.selection)}}else{s=t.selection}}else{s=await this.getQuad()}let n=await this.cvr.getSimplifiedSettings(i);n.roi=s;n.roiMeasuredInPercentage=false;await this.cvr.updateSettings(i,n);this.cvr.maxCvsSideLength=99999;let o=await this.cvr.capture(e,i,true);let a=o.items[0];let r=a.toCanvas().toDataURL();return r}else{let i=this.canvasElement.getContext("2d");let s;if(t.selection){if("width"in t.selection){s=t.selection}else{s=this.getRectFromPoints(t.selection.points)}}else{s=await this.getRect()}if(typeof e==="string"){e=await this.getImageFromDataURL(e)}if(e instanceof Blob){e=await this.getImageFromBlob(e)}this.canvasElement.width=s.width;this.canvasElement.height=s.height;i.drawImage(e,s.x,s.y,s.width,s.height,0,0,s.width,s.height);return this.canvasElement.toDataURL()}}async getImageFromBlob(t){return new Promise(((e,i)=>{let s=new FileReader;s.readAsDataURL(t);s.onloadend=function(){let t=s.result;let n=document.createElement("img");n.onload=function(){e(n)};n.onerror=function(){i()};n.src=t}}))}async getImageFromDataURL(t){return new Promise(((e,i)=>{let s=document.createElement("img");s.onload=function(){e(s)};s.onerror=function(){i()};s.src=t}))}async detect(t){if(window["Dynamsoft"]){if(!this.cvr){await this.initCVR()}this.cvr.maxCvsSideLength=99999;let e=await this.cvr.capture(t,"DetectDocumentBoundaries_Default",true);let i=[];for(let t=0;t<e.items.length;t++){const s=e.items[t];i.push(s)}return i}else{throw"Dynamsoft Document Normalizer not found"}}async initCVR(){window["Dynamsoft"]["License"]["LicenseManager"].initLicense(this.license);window["Dynamsoft"]["Core"]["CoreModule"].loadWasm(["DDN"]);this.cvr=await window["Dynamsoft"]["CVR"]["CaptureVisionRouter"].createInstance();await this.cvr.initSettings('{"CaptureVisionTemplates": [{"Name": "Default"},{"Name": "DetectDocumentBoundaries_Default","ImageROIProcessingNameArray": ["roi-detect-document-boundaries"]},{"Name": "DetectAndNormalizeDocument_Default","ImageROIProcessingNameArray": ["roi-detect-and-normalize-document"]},{"Name": "NormalizeDocument_Binary","ImageROIProcessingNameArray": ["roi-normalize-document-binary"]},  {"Name": "NormalizeDocument_Gray","ImageROIProcessingNameArray": ["roi-normalize-document-gray"]},  {"Name": "NormalizeDocument_Color","ImageROIProcessingNameArray": ["roi-normalize-document-color"]}],"TargetROIDefOptions": [{"Name": "roi-detect-document-boundaries","TaskSettingNameArray": ["task-detect-document-boundaries"]},{"Name": "roi-detect-and-normalize-document","TaskSettingNameArray": ["task-detect-and-normalize-document"]},{"Name": "roi-normalize-document-binary","TaskSettingNameArray": ["task-normalize-document-binary"]},  {"Name": "roi-normalize-document-gray","TaskSettingNameArray": ["task-normalize-document-gray"]},  {"Name": "roi-normalize-document-color","TaskSettingNameArray": ["task-normalize-document-color"]}],"DocumentNormalizerTaskSettingOptions": [{"Name": "task-detect-and-normalize-document","SectionImageParameterArray": [{"Section": "ST_REGION_PREDETECTION","ImageParameterName": "ip-detect-and-normalize"},{"Section": "ST_DOCUMENT_DETECTION","ImageParameterName": "ip-detect-and-normalize"},{"Section": "ST_DOCUMENT_NORMALIZATION","ImageParameterName": "ip-detect-and-normalize"}]},{"Name": "task-detect-document-boundaries","TerminateSetting": {"Section": "ST_DOCUMENT_DETECTION"},"SectionImageParameterArray": [{"Section": "ST_REGION_PREDETECTION","ImageParameterName": "ip-detect"},{"Section": "ST_DOCUMENT_DETECTION","ImageParameterName": "ip-detect"},{"Section": "ST_DOCUMENT_NORMALIZATION","ImageParameterName": "ip-detect"}]},{"Name": "task-normalize-document-binary","StartSection": "ST_DOCUMENT_NORMALIZATION",   "ColourMode": "ICM_BINARY","SectionImageParameterArray": [{"Section": "ST_REGION_PREDETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_DETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_NORMALIZATION","ImageParameterName": "ip-normalize"}]},  {"Name": "task-normalize-document-gray",   "ColourMode": "ICM_GRAYSCALE","StartSection": "ST_DOCUMENT_NORMALIZATION","SectionImageParameterArray": [{"Section": "ST_REGION_PREDETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_DETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_NORMALIZATION","ImageParameterName": "ip-normalize"}]},  {"Name": "task-normalize-document-color",   "ColourMode": "ICM_COLOUR","StartSection": "ST_DOCUMENT_NORMALIZATION","SectionImageParameterArray": [{"Section": "ST_REGION_PREDETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_DETECTION","ImageParameterName": "ip-normalize"},{"Section": "ST_DOCUMENT_NORMALIZATION","ImageParameterName": "ip-normalize"}]}],"ImageParameterOptions": [{"Name": "ip-detect-and-normalize","BinarizationModes": [{"Mode": "BM_LOCAL_BLOCK","BlockSizeX": 0,"BlockSizeY": 0,"EnableFillBinaryVacancy": 0}],"TextDetectionMode": {"Mode": "TTDM_WORD","Direction": "HORIZONTAL","Sensitivity": 7}},{"Name": "ip-detect","BinarizationModes": [{"Mode": "BM_LOCAL_BLOCK","BlockSizeX": 0,"BlockSizeY": 0,"EnableFillBinaryVacancy": 0,"ThresholdCompensation" : 7}],"TextDetectionMode": {"Mode": "TTDM_WORD","Direction": "HORIZONTAL","Sensitivity": 7},"ScaleDownThreshold" : 512},{"Name": "ip-normalize","BinarizationModes": [{"Mode": "BM_LOCAL_BLOCK","BlockSizeX": 0,"BlockSizeY": 0,"EnableFillBinaryVacancy": 0}],"TextDetectionMode": {"Mode": "TTDM_WORD","Direction": "HORIZONTAL","Sensitivity": 7}}]}')}getSVGWidth(){if(this.img&&this.svgElement){this.svgElement.style.height="100%";let t=this.img.naturalWidth/this.img.naturalHeight;let e=this.svgElement.clientHeight*t;if(e>this.svgElement.parentElement.clientWidth){e=this.svgElement.parentElement.clientWidth;this.svgElement.style.height=e/t+"px"}return e}return"100%"}onSVGPointerMove(t){if(t.pointerType!="mouse"&&!this.usingTouchEvent){t.stopPropagation();t.preventDefault();this.onSVGMouseMove(t)}}onSVGPointerDown(t){if(t.pointerType!="mouse"&&!this.usingTouchEvent){this.onSVGMouseDown(t)}}onSVGPointerUp(t){if(t.pointerType!="mouse"&&!this.usingTouchEvent){this.svgMouseDownPoint=undefined;this.selectedHandlerIndex=-1}}onPolygonPointerDown(t){if(t.pointerType!="mouse"&&!this.usingTouchEvent){this.onPolygonMouseDown(t)}}onPolygonPointerUp(t){t.stopPropagation();this.selectedHandlerIndex=-1;this.polygonMouseDown=false}render(){return i(n,{key:"a3f244fea50c901959a15eef61f5f1558e18b595",ref:t=>this.root=t},i("div",{key:"7f7ba626a468b40009a536fae978076d1f920289",class:"container absolute",ref:t=>this.containerElement=t,onWheel:t=>this.onContainerWheel(t),onMouseUp:()=>this.onContainerMouseUp()},i("canvas",{key:"a6a41654ba8390f0fec3819166e5e17c49cf46b1",ref:t=>this.canvasElement=t,class:"hidden-canvas"}),i("svg",{key:"159db0a6266024ba83e7f42e0486b7d08340ed8e",version:"1.1",ref:t=>this.svgElement=t,class:"cropper-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:this.viewBox,width:this.getSVGWidth(),style:{transform:this.getPanAndZoomStyle()},onMouseMove:t=>this.onSVGMouseMove(t),onMouseDown:t=>this.onSVGMouseDown(t),onTouchStart:t=>this.onSVGTouchStart(t),onTouchEnd:()=>this.onSVGTouchEnd(),onTouchMove:t=>this.onSVGTouchMove(t),onPointerMove:t=>this.onSVGPointerMove(t),onPointerDown:t=>this.onSVGPointerDown(t),onPointerUp:t=>this.onSVGPointerUp(t)},i("image",{key:"dab784bb6eb50de1765c166abdca78bab0e00a99",href:this.img?this.img.src:""}),this.rendenInactiveSelections(),i("polygon",{key:"4242ade2478c7f3d0d0e6505023547dc835853cf",points:this.getPointsData(),class:"cropper-controls dashed","stroke-width":this.activeStroke*this.getRatio(),fill:"transparent",onMouseDown:t=>this.onPolygonMouseDown(t),onMouseUp:t=>this.onPolygonMouseUp(t),onTouchStart:t=>this.onPolygonTouchStart(t),onTouchEnd:t=>this.onPolygonTouchEnd(t),onPointerDown:t=>this.onPolygonPointerDown(t),onPointerUp:t=>this.onPolygonPointerUp(t)}),this.renderHandlers()),this.renderFooter(),i("slot",{key:"1eb6ff94c6156f42b05c1101e637d5eef02fe51d"})))}static get watchers(){return{img:["watchImgPropHandler"],rect:["watchRectPropHandler"],quad:["watchQuadPropHandler"]}}};r.style=a;export{r as image_cropper};
//# sourceMappingURL=p-894ba0cf.entry.js.map